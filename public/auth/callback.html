<!DOCTYPE html>
<html>
<head>
    <title>Redirigiendo...</title>
</head>
<body>
    <script>
        // Extraer el token de la URL
        const hash = window.location.hash.substring(1);
        const urlParams = new URLSearchParams(hash);
        const accessToken = urlParams.get('access_token');
        const refreshToken = urlParams.get('refresh_token');
        
        console.log('Callback - Access Token:', accessToken ? 'Present' : 'Missing');
        console.log('Callback - Refresh Token:', refreshToken ? 'Present' : 'Missing');
        
        if (accessToken) {
            // Guardar los tokens en localStorage
            localStorage.setItem('supabase.auth.token', accessToken);
            if (refreshToken) {
                localStorage.setItem('supabase.auth.refresh_token', refreshToken);
            }
            
            // Limpiar la URL
            window.history.replaceState({}, document.title, '/auth/callback');
            
            // Redirigir a la aplicaciÃ³n principal
            setTimeout(() => {
                window.location.href = '/';
            }, 100);
        } else {
            console.error('No access token found in URL');
            // Si no hay token, redirigir al login
            window.location.href = '/';
        }
    </script>
    <p>Redirigiendo...</p>
</body>
</html> 